<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>مصحف الجوال الكامل</title>
    <style>
        :root { --main-bg: #ffffff; --nav-bg: #f8f9fa; --text-color: #333; --gold: #8e735b; }
        body { background: var(--main-bg); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; color: var(--text-color); font-family: sans-serif; }

        /* الهيدر */
        .nav-header { background: var(--nav-bg); padding: 5px 10px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; height: 45px; flex-shrink: 0; }
        .info { font-size: 13px; font-weight: bold; color: var(--gold); }
        .controls { display: flex; gap: 5px; }
        .input-ui { width: 65px; background: #fff; border: 1px solid #ccc; border-radius: 4px; padding: 4px; font-size: 11px; }
        .btn-ui { background: var(--gold); border: none; padding: 5px 10px; border-radius: 4px; color: white; font-weight: bold; font-size: 11px; }

        /* العرض */
        .viewer { flex: 1; display: flex; justify-content: center; align-items: center; background: #fdfdfd; overflow: hidden; touch-action: none; }
        #qPage { max-width: 100%; max-height: 100%; object-fit: contain; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

<div class="nav-header">
    <div class="info"><span id="sName">الفاتحة</span> | صـ <span id="pNum">1</span></div>
    <div class="controls">
        <input type="text" class="input-ui" id="srch" placeholder="بحث.." oninput="filterSurahs(this.value)">
        <select id="sList" class="input-ui" style="width: 80px;" onchange="jumpTo(this.value)"></select>
        <button class="btn-ui" onclick="goPrev()">السابق</button>
        <button class="btn-ui" onclick="goNext()">التالي</button>
    </div>
</div>

<div class="viewer" id="touchArea">
    <img id="qPage" src="001.jpg" onerror="this.src='https://raw.githubusercontent.com/search5/quran-images/master/001.jpg'">
</div>

<script>
    let p = 1;
    let xStart = null;

    // القائمة الكاملة لـ 114 سورة
    const data = [
        {n:"الفاتحة",p:1},{n:"البقرة",p:2},{n:"آل عمران",p:50},{n:"النساء",p:77},{n:"المائدة",p:106},{n:"الأنعام",p:128},{n:"الأعراف",p:151},{n:"الأنفال",p:177},{n:"التوبة",p:187},{n:"يونس",p:208},{n:"هود",p:221},{n:"يوسف",p:235},{n:"الرعد",p:249},{n:"إبراهيم",p:255},{n:"الحجر",p:262},{n:"النحل",p:267},{n:"الإسراء",p:282},{n:"الكهف",p:293},{n:"مريم",p:305},{n:"طه",p:312},{n:"الأنبياء",p:322},{n:"الحج",p:332},{n:"المؤمنون",p:342},{n:"النور",p:350},{n:"الفرقان",p:359},{n:"الشعراء",p:367},{n:"النمل",p:377},{n:"القصص",p:385},{n:"العنكبوت",p:396},{n:"الروم",p:404},{n:"لقمان",p:411},{n:"السجدة",p:415},{n:"الأحزاب",p:418},{n:"سبأ",p:428},{n:"فاطر",p:434},{n:"يس",p:440},{n:"الصافات",p:446},{n:"ص",p:453},{n:"الزمر",p:458},{n:"غافر",p:467},{n:"فصلت",p:477},{n:"الشورى",p:483},{n:"الزخرف",p:489},{n:"الدخان",p:496},{n:"الجاثية",p:499},{n:"الأحقاف",p:502},{n:"محمد",p:507},{n:"الفتح",p:511},{n:"الحجرات",p:515},{n:"ق",p:518},{n:"الذاريات",p:520},{n:"الطور",p:523},{n:"النجم",p:526},{n:"القمر",p:528},{n:"الرحمن",p:531},{n:"الواقعة",p:534},{n:"الحديد",p:537},{n:"المجادلة",p:542},{n:"الحشر",p:545},{n:"الممتحنة",p:549},{n:"الصف",p:551},{n:"الجمعة",p:553},{n:"المنافقون",p:554},{n:"التغابن",p:556},{n:"الطلاق",p:558},{n:"التحريم",p:560},{n:"الملك",p:562},{n:"القلم",p:564},{n:"الحاقة",p:566},{n:"المعارج",p:568},{n:"نوح",p:570},{n:"الجن",p:572},{n:"المزمل",p:574},{n:"المدثر",p:575},{n:"القيامة",p:577},{n:"الإنسان",p:578},{n:"المرسلات",p:580},{n:"النبأ",p:582},{n:"النازعات",p:583},{n:"عبس",p:585},{n:"التكوير",p:586},{n:"الانفطار",p:587},{n:"المطففين",p:587},{n:"الانشقاق",p:589},{n:"البروج",p:590},{n:"الطارق",p:591},{n:"الأعلى",p:591},{n:"الغاشية",p:592},{n:"الفجر",p:593},{n:"البلد",p:594},{n:"الشمس",p:595},{n:"الليل",p:595},{n:"الضحى",p:596},{n:"الشرح",p:596},{n:"التين",p:597},{n:"العلق",p:597},{n:"القدر",p:598},{n:"البينة",p:598},{n:"الزلزلة",p:599},{n:"العاديات", p:599},{n:"القارعة",p:600},{n:"التكاثر",p:600},{n:"العصر",p:601},{n:"الهمزة",p:601},{n:"الفيل",p:601},{n:"قريش",p:602},{n:"الماعون",p:602},{n:"الكوثر",p:602},{n:"الكافرون",p:603},{n:"النصر",p:603},{n:"المسد",p:603},{n:"الإخلاص",p:604},{n:"الفلق",p:604},{n:"الناس",p:604}
    ];

    function draw() {
        const img = document.getElementById('qPage');
        const num = p.toString().padStart(3, '0');
        img.src = `${num}.jpg`;
        document.getElementById('pNum').innerText = p;
        const s = data.filter(x => x.p <= p).slice(-1)[0];
        if(s) document.getElementById('sName').innerText = "سورة " + s.n;
    }

    function goNext() { if(p < 604) { p++; draw(); } }
    function goPrev() { if(p > 1) { p--; draw(); } }
    function jumpTo(val) { if(val) { p = parseInt(val); draw(); } }

    const tArea = document.getElementById('touchArea');
    tArea.addEventListener('touchstart', e => { xStart = e.touches[0].clientX; });
    tArea.addEventListener('touchend', e => {
        if (!xStart) return;
        let xEnd = e.changedTouches[0].clientX;
        let xDiff = xStart - xEnd;
        if (Math.abs(xDiff) > 40) {
            if (xDiff < 0) goNext(); else goPrev(); // تقليب عربي
        }
        xStart = null;
    });

    function filterSurahs(v) {
        const l = document.getElementById('sList');
        l.innerHTML = '<option value="">الفهرس..</option>';
        data.filter(s => s.n.includes(v)).forEach(s => l.add(new Option(s.n, s.p)));
    }

    window.onload = () => { filterSurahs(''); draw(); };
</script>
</body>
</html>
