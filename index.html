<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>المصحف الإلكتروني الفاخر</title>
    <style>
        :root {
            --gold: #d4af37;
            --dark-gold: #aa8c2c;
            --bg-color: #121212;
        }

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg-color); overflow: hidden; font-family: 'Segoe UI', sans-serif; }

        /* الهيدر المحسن */
        .header {
            height: 90px;
            background: linear-gradient(to bottom, #2c2c2c, #1a1a1a);
            border-bottom: 2px solid var(--gold);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 1000; position: relative;
            box-shadow: 0 5px 20px rgba(0,0,0,0.8);
        }

        .surah-name { color: var(--gold); font-size: 24px; font-weight: bold; text-shadow: 2px 2px 4px #000; }
        .page-info { color: #ccc; font-size: 14px; margin-top: 5px; }

        /* شريط الأدوات */
        .toolbar {
            height: 55px; background: #1f1f1f; display: flex; justify-content: center; gap: 15px; align-items: center;
            border-bottom: 1px solid #333; z-index: 900; position: relative;
        }

        select, input {
            background: #2a2a2a; color: var(--gold); border: 1px solid var(--dark-gold);
            border-radius: 8px; padding: 6px 12px; font-size: 14px; outline: none;
        }

        /* حاوية العرض */
        .mushaf-viewport {
            height: calc(100vh - 145px);
            width: 100vw;
            display: flex; justify-content: center; align-items: center;
            background: #000; position: relative;
            overflow: hidden;
        }

        #quran-image {
            max-width: 100%; max-height: 100%;
            object-fit: contain;
            transition: transform 0.2s ease;
            z-index: 10; /* خلف منطقة النقر */
        }

        /* مناطق النقر (شفافة لكنها فوق الصورة) */
        .nav-area {
            position: absolute; top: 0; height: 100%; width: 45%;
            z-index: 2000; /* أعلى شيء لضمان وصول اللمس */
            cursor: pointer;
            display: flex; align-items: center;
            -webkit-tap-highlight-color: transparent;
        }
        
        .right-nav { right: 0; justify-content: flex-end; }
        .left-nav { left: 0; justify-content: flex-start; }

        /* أسهم خفيفة تظهر عند التحويم أو اللمس */
        .nav-arrow {
            color: rgba(212, 175, 55, 0.4); font-size: 40px; padding: 20px;
            pointer-events: none; /* السهم لا يعيق النقر */
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="surah-name" id="display-surah">سورة الفاتحة</div>
        <div class="page-info" id="display-page">صفحة ١</div>
    </div>

    <div class="toolbar">
        <select id="surah-index" onchange="jumpToPage(this.value)">
            <option value="1">الفهرس..</option>
        </select>
        <input type="number" id="page-search" placeholder="رقم ص.." style="width: 70px;" onchange="jumpToPage(this.value)">
    </div>

    <div class="mushaf-viewport">
        <div class="nav-area right-nav" onclick="changePage(1)">
            <span class="nav-arrow">❮</span>
        </div>

        <img id="quran-image" src="001.jpg" alt="جاري التحميل...">

        <div class="nav-area left-nav" onclick="changePage(-1)">
            <span class="nav-arrow">❯</span>
        </div>
    </div>

<script>
    let currentPage = 1;
    // قائمة السور الأساسية
    const surahs = [
        {n:"الفاتحة", p:1}, {n:"البقرة", p:2}, {n:"آل عمران", p:50}, {n:"النساء", p:77},
        {n:"المائدة", p:106}, {n:"الأنعام", p:128}, {n:"الأعراف", p:151}, {n:"الأنفال", p:177},
        {n:"التوبة", p:187}, {n:"يونس", p:208}, {n:"هود", p:221}, {n:"يوسف", p:235}
    ];

    function init() {
        const select = document.getElementById('surah-index');
        surahs.forEach(s => {
            select.add(new Option(s.n, s.p));
        });
        updateDisplay();
    }

    function changePage(step) {
        // في نظام RTL: النقر يميناً يعني زيادة الصفحة
        currentPage += step;
        if (currentPage < 1) currentPage = 1;
        if (currentPage > 604) currentPage = 604;
        updateDisplay();
    }

    function jumpToPage(val) {
        let p = parseInt(val);
        if (p >= 1 && p <= 604) {
            currentPage = p;
            updateDisplay();
        }
    }

    function updateDisplay() {
        const img = document.getElementById('quran-image');
        const pNum = currentPage.toString().padStart(3, '0');
        
        // تغيير الصورة (مع محاولة الرابط الخارجي إذا فشل المحلي)
        img.src = pNum + ".jpg";
        img.onerror = function() { 
            this.src = "https://raw.githubusercontent.com/search5/quran-images/master/" + pNum + ".jpg"; 
        };

        // تحديث النصوص
        let currentS = surahs.filter(s => s.p <= currentPage).pop();
        document.getElementById('display-surah').innerText = "سورة " + (currentS ? currentS.n : "...");
        document.getElementById('display-page').innerText = "صفحة " + currentPage;
        document.getElementById('page-search').value = currentPage;
    }

    window.onload = init;
</script>
</body>
</html>
